window.onload=function(){!function(){let e=sessionStorage.getItem("userId");fetch(`https://web2-course-project-medoski.onrender.com/users/${e}`,{method:"GET"}).then((e=>e.json())).then((e=>{let t=document.getElementById("profilcontainer"),n="",s=e._id,a=e.firstname,o=e.lastname,i=e.email,d=e.password;n+=` <h2 class="textprofil" id="${s} textprofil">First name : </h2>\n            <h3 class="firstnamestyle" id="firstnamestyle">${a}</h3>\n            <h2 class="textprofil">Last Name : </h2>\n           \n            <h3 class="firstnamestyle" id="lastnamestyle" >${o}</h3>\n          \n            <h2 class="textprofil">Email : </h2>\n            <div class="divEmailEdit">\n            <h3 class="firstnamestyle">${i}</h3> <i class="material-icons updateacc" id="updateacc">create</i>\n            </div>\n            <div class="emailInput" id="emailInput">\n\n            <form class="emailChangeForm" id="emailChangeForm">\n            <input type="text" class="emailInputForm" id="emailInputForm" name="email" placeholder="New email">\n            <button type="submit" class="submitEmailChange" id="submitEmailChange">Change email</button>\n\n            </form>\n            </div>\n            <h2 class="textprofil">Password : </h2>\n            <div class="divPasswordEdit">\n            <h3 class="firstnamestyle"><a id="passwordShow">Change password</a></h3><i class="material-icons updatepassword" id="updatepassword">create</i>\n            </div>\n\n            <div class="passwordInput" id="passwordInput">\n            <form class="passwordChangeForm" id="passwordChangeForm">\n            <input type="text" class="passwordInputForm" id="passwordInputForm" name="password" placeholder="New password">\n            <button type="submit" class="submitpasswordChange" id="submitpasswordChange">Change password</button>\n\n            </form>\n            </div>\n            `,t.insertAdjacentHTML("afterbegin",n),function(e,t,n){document.getElementById("emailChangeForm").addEventListener("submit",(s=>{s.preventDefault();let a=sessionStorage.getItem("userId");const o={firstname:e,lastname:t,email:s.target.email.value,password:n};fetch(`https://web2-course-project-medoski.onrender.com/users/${a}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then((e=>{e.json()})).then((e=>{null==e&&location.reload()}))}))}(a,o,d),function(e,t,n){document.getElementById("passwordChangeForm").addEventListener("submit",(s=>{s.preventDefault();let a=sessionStorage.getItem("userId");const o={firstname:e,lastname:t,email:n,password:s.target.password.value};fetch(`https://web2-course-project-medoski.onrender.com/users/${a}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then((e=>{e.json()})).then((e=>{null==e&&location.reload()}))}))}(a,o,i),document.getElementById("updateacc").addEventListener("click",(function(e){document.getElementById("emailInput").style.display="block"})),document.getElementById("updatepassword").addEventListener("click",(function(e){document.getElementById("passwordInput").style.display="block"})),document.getElementById("deleteaccsure").addEventListener("click",(function(e){let t=sessionStorage.getItem("userId");fetch(`https://web2-course-project-medoski.onrender.com/users/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{window.location.href="./../index.html"}))}))}))}(),document.getElementById("deleteaccbtn").addEventListener("click",(function(e){document.getElementById("deleteaccsure").style.display="block"})),document.getElementById("discaccbtn").addEventListener("click",(function(e){sessionStorage.removeItem("userId"),window.location.href="./../index.html"}))};